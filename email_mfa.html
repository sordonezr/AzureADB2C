<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v9 Iniciar Sesión - Colmena Seguros</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        
        #email_label {
        	display: none !important;
        }
        
        #email_info {
        	display: none !important;
        }
        
        .container {
        	display: flex;
        	background-color: #ffffff;
        	border-radius: 10px;
        	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        	overflow: hidden;
        	max-width: 900px;
        	width: 100%;
        }
        
        .left-section {
        	padding: 40px;
        	background-color: #f4f7fb;
        	flex: 1;
        }
        
        .left-section h2 {
        	color: #0097AE;
        	font-weight: 500;
        	margin-bottom: 10px;
        }
        
        .left-section p {
        	color: #333333;
        	font-weight: 400;
        	line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="left-section">
            <img src="https://raw.githubusercontent.com/sordonezr/AzureADB2C/main/img/logo-colmena.png" alt="Colmena Seguros Logo">
            <h2>Validacion de Identidad</h2>
            <label id="emailLabel">Email: </label>
        </div>
        <div id="api"></div>
    </div>
<script>


        /**
     * Realiza operaciones sobre elementos HTML seleccionados.
     * @param {Array} actions - Lista de acciones a realizar sobre los elementos.
     *    Cada objeto debe contener:
     *      - type: Tipo de acción ('remove' para eliminar, 'replace' para reemplazar texto).
     *      - selector: Selector CSS para identificar los elementos.
     *      - text: (Opcional) Texto exacto que debe coincidir para eliminar un elemento (solo para 'remove').
     *      - oldText: (Opcional) Texto a reemplazar en el contenido HTML (solo para 'replace').
     *      - newText: (Opcional) Nuevo texto para reemplazar oldText (solo para 'replace').
     */
      function processElements(actions) {
          // Itera sobre cada acción especificada en el array
          actions.forEach(function(action) {
              // Selecciona los elementos del DOM usando el selector CSS proporcionado
              var elements = document.querySelectorAll(action.selector);
              
              // Itera sobre cada elemento seleccionado
              elements.forEach(function(element) {
                  // Verifica si la acción es de tipo 'remove' y si el texto coincide exactamente
                  if (action.type === 'remove') {
                      // Elimina el elemento del DOM
                      element.remove();
                  } 
                  // Verifica si la acción es de tipo 'replace' para reemplazar el texto
                  else if (action.type === 'replace') {
                      // Reemplaza el texto dentro del contenido HTML del elemento
                      element.innerHTML = element.innerHTML.replace(action.oldText, action.newText);
                  }
                  // Verifica si la acción es de tipo 'add' para agregar nuevo contenido
                  else if (action.type === 'add') {
                      // Verifica la posición de inserción
                      if (action.position === 'before') {
                          // Inserta el nuevo contenido antes del contenido existente
                          element.insertAdjacentHTML('beforebegin', action.newContent);
                      } else if (action.position === 'after') {
                          // Inserta el nuevo contenido después del contenido existente
                          element.insertAdjacentHTML('afterend', action.newContent);
                      } else if (action.position === 'inside') {
                          // Inserta el nuevo contenido dentro del elemento existente
                          element.insertAdjacentHTML('beforeend', action.newContent);
                      }
                  }
              });
          });
      }

    // Llamada a la función para remover, reemplazar y agregar textos
   processElements([
    { type: 'remove', selector: 'div.intro', text: '' },
    { type: 'remove', selector: 'a.helpLink.tiny[data-help="email"]', text: '' },
    { type: 'remove', selector: '#cancel', text: '' },
    { type: 'remove', selector: '#email_ver_but_resend', text: '' },
    { type: 'remove', selector: '#email.textInput', text: '' },

]);


    // Función para obtener el valor de un parámetro específico de la URL
    function getParameterByName(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    // Obtener el valor del parámetro "email"
    const emailValue = getParameterByName('email');

    // Verificar periódicamente si el campo de entrada está disponible
    const intervalId = setInterval(function() {
        const emailInput = document.getElementById('email');
        const emailLabel = document.getElementById('emailLabel');
        
        if (emailInput && emailValue) {
            emailInput.value = emailValue;

            // Actualizar el texto del label con el valor del email
            if (emailLabel) {
                emailLabel.textContent = `Email: ${emailValue}`;
            }

            // Detener la verificación una vez que se ha encontrado el campo y asignado el valor
            clearInterval(intervalId);

            // Ejecutar automáticamente el botón de continuar
            const sendVerificationCodeButton = document.getElementById('email_ver_but_send');
            if (sendVerificationCodeButton) {
                sendVerificationCodeButton.click(); // Disparar el clic en el botón
            }

            // Escuchar el evento 'input' para detectar cambios en tiempo real
            emailInput.addEventListener('input', function() {
                const emailInputValue = this.value;
                console.log('Valor actual del input email:', emailInputValue); // Mostrar el valor en la consola en tiempo real

                // Actualizar el texto del label en tiempo real
                if (emailLabel) {
                    emailLabel.textContent = `Email: ${emailInputValue}`;
                }
            });
        }
    }, 100); // Verificar cada 100ms
</script>
</body>
</html>
